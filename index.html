<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LikeInk Designer - Custom Tattoo Sheet Designer</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>LikeInk Designer</h1>
            <p>Design your custom A5 tattoo sheet</p>
        </header>

        <div class="designer-workspace">
            <!-- Toolbar -->
            <div class="toolbar">
                <div class="toolbar-group">
                    <button id="open-upload-dialog-btn" class="btn btn-primary">
                        ‚ûï Add Content
                    </button>
                    <label for="file-upload" class="btn btn-primary">
                        üìÅ Upload Image
                    </label>
                    <input type="file" id="file-upload" accept="image/*" multiple style="display: none;">
                </div>

                <div class="toolbar-group">
                    <button id="select-all-btn" class="btn btn-secondary">
                        ‚òëÔ∏è Select All
                    </button>
                    <button id="deselect-btn" class="btn btn-secondary" disabled>
                        ‚òê Deselect
                    </button>
                    <button id="duplicate-btn" class="btn btn-secondary" disabled>
                        üìã Duplicate
                    </button>
                    <button id="delete-btn" class="btn btn-danger" disabled>
                        üóëÔ∏è Delete
                    </button>
                </div>

                <div class="toolbar-group">
                    <button id="undo-btn" class="btn btn-secondary" disabled>
                        ‚Ü©Ô∏è Undo
                    </button>
                    <button id="redo-btn" class="btn btn-secondary" disabled>
                        ‚Ü™Ô∏è Redo
                    </button>
                </div>

                <div class="toolbar-group">
                    <button id="bring-forward-btn" class="btn btn-secondary" disabled>
                        ‚¨ÜÔ∏è Forward
                    </button>
                    <button id="send-backward-btn" class="btn btn-secondary" disabled>
                        ‚¨áÔ∏è Backward
                    </button>
                </div>

                <div class="toolbar-group">
                    <button id="clear-btn" class="btn btn-warning">
                        üîÑ Clear All
                    </button>
                    <button id="fill-sheet-btn" class="btn btn-secondary">
                        üìã Fill Sheet
                    </button>
                </div>

                <div class="toolbar-group">
                    <button id="add-to-cart-btn" class="btn btn-primary">
                        üõí Add to Cart
                    </button>
                </div>
            </div>

            <!-- Canvas Container -->
            <div class="canvas-container">
                <div class="canvas-wrapper">
                    <div class="ruler-top" id="ruler-top"></div>
                    <div class="ruler-left" id="ruler-left"></div>
                    <div class="canvas-area">
                        <canvas id="designer-canvas"></canvas>
                    </div>
                </div>
                <div class="canvas-info">
                    <p>üìè A5 Landscape (210mm √ó 148mm) ‚Ä¢ 300 DPI</p>
                    <p class="bleed-info">Red dashed line shows 5mm bleed area - keep important elements inside</p>
                </div>
            </div>

            <!-- Instructions -->
            <div class="instructions">
                <h3>How to use:</h3>
                <ul>
                    <li><strong>Upload:</strong> Click "Upload Image" or drag & drop images onto the canvas</li>
                    <li><strong>Move:</strong> Drag images around the canvas</li>
                    <li><strong>Resize:</strong> Drag corner handles to resize (hold Shift for proportional)</li>
                    <li><strong>Rotate:</strong> Drag the rotation handle at the top</li>
                    <li><strong>Select All:</strong> Press Ctrl+A to select all images</li>
                    <li><strong>Deselect:</strong> Press ESC to deselect all images</li>
                    <li><strong>Duplicate:</strong> Select an image and click "Duplicate" or press Ctrl+D</li>
                    <li><strong>Delete:</strong> Select an image and click "Delete" or press Delete key</li>
                    <li><strong>Undo/Redo:</strong> Use Ctrl+Z to undo, Ctrl+Y to redo</li>
                    <li><strong>Fill Sheet:</strong> Automatically arranges images and fills the entire sheet with
                        copies (3mm spacing)</li>
                    <li><strong>Bleed Area:</strong> Keep important parts inside the red dashed line</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Upload Dialog -->
    <div id="upload-dialog" class="upload-dialog">
        <div class="upload-dialog-content">
            <div class="dialog-header">
                <h2 id="dialog-title">Add Content to Sheet</h2>
                <button id="close-dialog-btn" class="close-dialog-btn" title="Close">‚úï</button>
            </div>

            <!-- Content Type Selector -->
            <div class="content-type-selector">
                <button id="image-mode-btn" class="content-type-btn active">üìÅ Image</button>
                <button id="text-mode-btn" class="content-type-btn">üìù Text</button>
            </div>

            <!-- Image Upload Section -->
            <div id="image-section" class="content-section active">
                <!-- Upload Zone -->
                <div id="upload-zone" class="upload-zone">
                    <div class="upload-zone-content">
                        <div class="upload-icon">üìÅ</div>
                        <p class="upload-text">Click to upload or drag & drop an image</p>
                        <p class="upload-hint">Supports PNG, JPG, SVG</p>
                        <input type="file" id="dialog-file-upload" accept="image/*" style="display: none;">
                    </div>
                </div>

                <!-- Preview Section (hidden by default) -->
                <div id="preview-section" class="preview-section" style="display: none;">
                    <div class="preview-container">
                        <img id="preview-image" src="" alt="Preview">
                    </div>

                    <div class="size-control">
                        <label for="size-slider">Image Width: <span id="size-value">10</span> cm</label>
                        <input type="range" id="size-slider" min="10" max="210" value="100" step="10">
                    </div>

                    <div class="dialog-question">
                        <p>Do you want to add more designs to the sheet?</p>
                        <div class="dialog-buttons">
                            <button id="fill-sheet-dialog-btn" class="btn btn-primary">No, fill sheet with this one</button>
                            <button id="add-more-btn" class="btn btn-secondary">Yes, let me add more images</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Text Input Section (hidden by default) -->
            <div id="text-section" class="content-section">
                <div class="text-input-container">
                    <label for="text-input">Enter your text:</label>
                    <textarea id="text-input" class="text-input" placeholder="Type your text here..." rows="6"></textarea>
                </div>

                <div class="text-size-control">
                    <label for="text-size-slider">Text Size: <span id="text-size-value">‚Äî</span> cm</label>
                    <input type="range" id="text-size-slider" min="20" max="200" value="40" step="5">
                </div>

                <div id="text-size-warning" class="text-size-warning" style="display: none;">
                    <p>‚ö†Ô∏è Text is too wide! It exceeds the printable area and will be cut off.</p>
                </div>

                <div class="dialog-question">
                    <p>Do you want to add more designs to the sheet?</p>
                    <div class="dialog-buttons">
                        <button id="fill-sheet-text-btn" class="btn btn-primary">No, fill sheet with this text</button>
                        <button id="add-text-btn" class="btn btn-secondary">Yes, let me add more content</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load Fabric.js from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/fabric@latest/dist/index.min.js"></script>
    <script src="js/designer.js"></script>
</body>

</html>